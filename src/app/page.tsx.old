import { headers } from 'next/headers'
import { redirect } from 'next/navigation'
import { extractSubdomain, isMainPortal } from '@/lib/subdomain-utils'
import SubdomainLandingPage from '@/components/subdomain/SubdomainLandingPage'
import MainHomePage from '@/components/home/MainHomePage'

export default async function HomePage() {
  // Check if we're on a subdomain
  const headersList = await headers()
  const hostname = headersList.get('host') || ''
  const subdomain = extractSubdomain(hostname)
  
  // If on subdomain and not main portal, show org landing page
  if (subdomain && !isMainPortal(hostname)) {
    return <SubdomainLandingPage subdomain={subdomain} />
  }
  
  // Otherwise show main homepage
  return <MainHomePage />
}
